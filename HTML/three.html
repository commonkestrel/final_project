<!DOCTYPE html>
<html>
    <head>
        <style>
            canvas {
                position: fixed !important;
                top: 0px !important;
                left: 0px !important;
                z-index: -1;
            }
            body {
                overflow-x: hidden;
                height: 5000vh;
            }
            body > * {
                position: fixed;
            }
            ::-webkit-scrollbar {
                width: 15px;
                background: #000;
                right: -5px;
            }
            
            /* Handle */
            ::-webkit-scrollbar-thumb {
                background: rgb(109, 109, 109);
                border-radius: 12.5px;
            }
            
            /* Handle on hover */
            ::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
        </style>
    </head>
    <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script>
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
            originalAspect = window.innerWidth / window.innerHeight;

            const renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild( renderer.domElement );

            const loader = new THREE.TextureLoader();
            loader.setCrossOrigin('anonymous')
            const texture = loader.load('http://localhost:3000/images/world-outline-black.png');

            const geometry = new THREE.SphereGeometry(2, 32, 32);
            const material = new THREE.MeshBasicMaterial( { map: texture } );
            const sphere = new THREE.Mesh( geometry, material );
            scene.add( sphere );
            camera.position.z = 10;
            camera.position.x = -15;

            const animate = (amount) => {
                
                sphere.rotation.y += amount;
                if(camera.position.x < 0) {	
                    camera.position.x += amount*2;
                }
                //line.rotation.y += amount;

                renderer.render(scene, camera);
            };
            animate(0);
            $(document).ready(() => {
                const viewSize=20;
                let lastScrollY = window.pageYOffset;
                $(window).resize(() => {
                    let aspect = window.innerWidth / window.innerHeight;
                    let change = originalAspect / aspect;
                    let newSize = viewSize * change;
                    camera.left = -aspect * newSize / 2;
                    camera.right = aspect * newSize  / 2;
                    camera.top = newSize / 2;
                    camera.bottom = -newSize / 2;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });
                $(window).scroll(() => {
                    let amount = (this.pageYOffset - lastScrollY) * 0.002;
                    lastScrollY = window.pageYOffset;
                    animate(amount)
                });
            });
        </script>
    </body>
</html>
